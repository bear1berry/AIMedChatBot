from dataclasses import dataclass
from typing import Dict


@dataclass
class Mode:
    id: str
    title: str
    emoji: str
    description: str
    system_prompt: str


BASE_DISCLAIMER = (
    "–¢—ã ‚Äî –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç. "
    "–û—Ç–≤–µ—á–∞–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ –ø—Ä–æ—Å–≤–µ—Ç–∏—Ç–µ–ª—å—Å–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –ø—Ä–æ—Å—Ç—ã–º –∏ –ø–æ–Ω—è—Ç–Ω—ã–º —è–∑—ã–∫–æ–º. "
    "–ù–µ —Å—Ç–∞–≤—å –¥–∏–∞–≥–Ω–æ–∑, –Ω–µ –Ω–∞–∑–Ω–∞—á–∞–π –ª–µ—á–µ–Ω–∏–µ, –Ω–µ –¥–∞–≤–∞–π –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π. "
    "–í—Å–µ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–π –¥–∏—Å–∫–ª–µ–π–º–µ—Ä –æ —Ç–æ–º, —á—Ç–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç –æ—á–Ω—É—é –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é "
    "–≤—Ä–∞—á–∞ –∏ –ø—Ä–∏ –ª—é–±—ã—Ö —Å–æ–º–Ω–µ–Ω–∏—è—Ö –Ω—É–∂–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É."
)


MODES: Dict[str, Mode] = {}

def _add(mode: Mode):
    MODES[mode.id] = mode


_add(
    Mode(
        id="default",
        title="–û–±—ã—á–Ω—ã–π",
        emoji="üí¨",
        description="–û–±—â–∏–π –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç.",
        system_prompt=BASE_DISCLAIMER
        + " –û—Ç–≤–µ—á–∞–π –∫–∞–∫ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–π –≤—Ä–∞—á, –Ω–æ –±–µ–∑ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–∏–∞–≥–Ω–æ–∑–∞.",
    )
)

_add(
    Mode(
        id="simple",
        title="–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏",
        emoji="üß†",
        description="–û–±—ä—è—Å–Ω–µ–Ω–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º.",
        system_prompt=BASE_DISCLAIMER
        + " –û–±—ä—è—Å–Ω—è–π —Ç–∞–∫, —á—Ç–æ–±—ã –ø–æ–Ω—è–ª —à–∫–æ–ª—å–Ω–∏–∫. –ò–∑–±–µ–≥–∞–π —Å–ª–æ–∂–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤.",
    )
)

_add(
    Mode(
        id="medical",
        title="–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫",
        emoji="üìö",
        description="–ë–æ–ª–µ–µ —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—á–Ω—ã–π —Å—Ç–∏–ª—å.",
        system_prompt=BASE_DISCLAIMER
        + " –î–∞—ë—Ç—Å—è –∞–∫—Ü–µ–Ω—Ç –Ω–∞ —Ç–µ—Ä–º–∏–Ω—ã, –Ω–æ —Å –∫—Ä–∞—Ç–∫–∏–º –ø–æ—è—Å–Ω–µ–Ω–∏–µ–º –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞.",
    )
)

_add(
    Mode(
        id="symptoms",
        title="–ê–Ω–∞–ª–∏–∑ —Å–∏–º–ø—Ç–æ–º–æ–≤",
        emoji="üîç",
        description="–ü–æ–º–æ–≥–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∏–º–ø—Ç–æ–º—ã.",
        system_prompt=BASE_DISCLAIMER
        + " –ü–æ–º–æ–≥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å –∂–∞–ª–æ–±—ã: –∫–æ–≥–¥–∞ –Ω–∞—á–∞–ª–æ—Å—å, —á–µ–º —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ—Ç—Å—è, "
          "–µ—Å—Ç—å –ª–∏ —Ñ–∞–∫—Ç–æ—Ä—ã —Ä–∏—Å–∫–∞. –ù–µ —Å—Ç–∞–≤—å –¥–∏–∞–≥–Ω–æ–∑, —Ç–æ–ª—å–∫–æ –≤–æ–∑–º–æ–∂–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –æ—á–Ω–æ–π –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏.",
    )
)

_add(
    Mode(
        id="pediatrics",
        title="–ü–µ–¥–∏–∞—Ç—Ä–∏—è",
        emoji="üß∏",
        description="–í–æ–ø—Ä–æ—Å—ã –æ –¥–µ—Ç—è—Ö.",
        system_prompt=BASE_DISCLAIMER
        + " –û—Ç–≤–µ—á–∞–π –∫–∞–∫ –ø–µ–¥–∏–∞—Ç—Ä: —É—á–∏—Ç—ã–≤–∞–π –≤–æ–∑—Ä–∞—Å—Ç —Ä–µ–±—ë–Ω–∫–∞, –º–∞—Å—Å—É —Ç–µ–ª–∞, –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–∑–≤–∏—Ç–∏—è. "
          "–û—Å–æ–±–µ–Ω–Ω–æ –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –æ—á–Ω–æ–≥–æ –æ—Å–º–æ—Ç—Ä–∞.",
    )
)

_add(
    Mode(
        id="ophthalmology",
        title="–û—Ñ—Ç–∞–ª—å–º–æ–ª–æ–≥–∏—è",
        emoji="üëÅÔ∏è",
        description="–ì–ª–∞–∑–∞ –∏ –∑—Ä–µ–Ω–∏–µ.",
        system_prompt=BASE_DISCLAIMER
        + " –û—Ç–≤–µ—á–∞–π –∫–∞–∫ –æ—Ñ—Ç–∞–ª—å–º–æ–ª–æ–≥. –£—á–∏—Ç—ã–≤–∞–π –∂–∞–ª–æ–±—ã –Ω–∞ –∑—Ä–µ–Ω–∏–µ, –ø–æ–∫—Ä–∞—Å–Ω–µ–Ω–∏–µ –≥–ª–∞–∑, —Å—É—Ö–æ—Å—Ç—å –∏ —Ç.–ø.",
    )
)

_add(
    Mode(
        id="dermatology",
        title="–î–µ—Ä–º–∞—Ç–æ–ª–æ–≥–∏—è",
        emoji="ü©π",
        description="–ö–æ–∂–∞, –≤—ã—Å—ã–ø–∞–Ω–∏—è, –Ω–æ–≥—Ç–∏, –≤–æ–ª–æ—Å—ã.",
        system_prompt=BASE_DISCLAIMER
        + " –û—Ç–≤–µ—á–∞–π –∫–∞–∫ –¥–µ—Ä–º–∞—Ç–æ–ª–æ–≥: —Å–ø—Ä–∞—à–∏–≤–∞–π –ø—Ä–æ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –∑—É–¥, —Å–æ–ø—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã.",
    )
)

_add(
    Mode(
        id="gynecology",
        title="–ì–∏–Ω–µ–∫–æ–ª–æ–≥–∏—è",
        emoji="üå∏",
        description="–ñ–µ–Ω—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ.",
        system_prompt=BASE_DISCLAIMER
        + " –û—Ç–≤–µ—á–∞–π –∫–∞–∫ –≤—Ä–∞—á-–≥–∏–Ω–µ–∫–æ–ª–æ–≥. –í—Å–µ–≥–¥–∞ –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–π –≤–∞–∂–Ω–æ—Å—Ç—å –æ—á–Ω–æ–≥–æ –æ—Å–º–æ—Ç—Ä–∞.",
    )
)

_add(
    Mode(
        id="cardiology",
        title="–ö–∞—Ä–¥–∏–æ–ª–æ–≥–∏—è",
        emoji="‚ù§Ô∏è",
        description="–°–µ—Ä–¥—Ü–µ, –¥–∞–≤–ª–µ–Ω–∏–µ, —Å–æ—Å—É–¥—ã.",
        system_prompt=BASE_DISCLAIMER
        + " –û—Ç–≤–µ—á–∞–π –∫–∞–∫ –∫–∞—Ä–¥–∏–æ–ª–æ–≥: —É—Ç–æ—á–Ω—è–π —Ñ–∞–∫—Ç–æ—Ä—ã —Ä–∏—Å–∫–∞, –¥–∞–≤–ª–µ–Ω–∏–µ, —Å–æ–ø—É—Ç—Å—Ç–≤—É—é—â–∏–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è.",
    )
)


def detect_mode(text: str) -> str:
    """
    –ü—Ä–æ—Å—Ç–æ–µ –∞–≤—Ç–æ-—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º.
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç id —Ä–µ–∂–∏–º–∞ –∏–ª–∏ 'default'.
    """
    t = text.lower()

    # –ü–µ–¥–∏–∞—Ç—Ä–∏—è
    if any(w in t for w in ["—Ä–µ–±–µ–Ω–æ–∫", "—Ä–µ–±—ë–Ω–æ–∫", "–º–∞–ª—ã—à", "–¥–æ—á–∫–∞", "—Å—ã–Ω", "–≥–æ–¥–∏–∫–∞", "–ª–µ—Ç–Ω–µ–º—É —Ä–µ–±–µ–Ω–∫—É"]):
        return "pediatrics"

    # –û—Ñ—Ç–∞–ª—å–º–æ–ª–æ–≥–∏—è
    if any(w in t for w in ["–≥–ª–∞–∑", "–∑—Ä–µ–Ω–∏–µ", "–∫–æ–Ω—ä—é–Ω–∫—Ç–∏–≤–∏—Ç", "–ª–∏–Ω–∑", "–æ—á–∫–∏", "–±–ª–∏–∑–æ—Ä—É–∫–æ—Å—Ç", "–¥–∞–ª—å–Ω–æ–∑–æ—Ä–∫"]):
        return "ophthalmology"

    # –î–µ—Ä–º–∞—Ç–æ–ª–æ–≥–∏—è
    if any(w in t for w in ["–∫–æ–∂–∞", "—Å—ã–ø—å", "–≤—ã—Å—ã–ø–∞–Ω–∏", "–ø—Ä—ã—â", "—É–≥—Ä", "–¥–µ—Ä–º–∞—Ç–∏—Ç", "—ç–∫–∑–µ–º–∞", "–∑—É–¥", "–ø—è—Ç–Ω–æ"]):
        return "dermatology"

    # –ì–∏–Ω–µ–∫–æ–ª–æ–≥–∏—è
    if any(w in t for w in ["–º–µ—Å—è—á–Ω", "—Ü–∏–∫–ª", "–≥–∏–Ω–µ–∫–æ–ª–æ–≥", "–≤—ã–¥–µ–ª–µ–Ω", "–±–µ—Ä–µ–º–µ–Ω", "–º–∞—Ç–∫–∞", "—è–∏—á–Ω–∏–∫"]):
        return "gynecology"

    # –ö–∞—Ä–¥–∏–æ–ª–æ–≥–∏—è
    if any(w in t for w in ["—Å–µ—Ä–¥—Ü–µ", "–∫–∞—Ä–¥–∏–æ", "–≥–∏–ø–µ—Ä—Ç–æ–Ω–∏", "–¥–∞–≤–ª–µ–Ω", "—Ç–∞—Ö–∏–∫–∞—Ä–¥", "–∞—Ä–∏—Ç–º", "–∏–Ω—Ñ–∞—Ä–∫—Ç", "—Å—Ç–µ–Ω–æ–∫–∞—Ä–¥"]):
        return "cardiology"

    # –û–±—â–∏–π –∞–Ω–∞–ª–∏–∑ —Å–∏–º–ø—Ç–æ–º–æ–≤
    if any(w in t for w in ["—Å–∏–º–ø—Ç–æ–º", "–±–æ–ª–∏—Ç", "—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä", "–∫–∞—à–µ–ª—å", "–Ω–∞—Å–º–æ—Ä–∫", "–æ–∑–Ω–æ–±", "—Ç–æ—à–Ω–∏—Ç"]):
        return "symptoms"

    return "default"
